---
layout: page
title: Project 2
parent: Projects
description: >-
    Projects
due: TBD
---

# Project 2: TBD Game

## Overview
You will be creating a maze game. The user will navigate a pirate around the maze using key presses and mouse clicks. The maze will contain some obstacles, as well as special items (gadgets), such as meat to completely restore the pirate’s strength, lemons to give them a small strength boost, wet floor signs to deplete their strength, or explosives to allow the pirate to remove an obstacle. The strength is shown as the yellow bar on the right. The goal: help the pirate safely make it back to the end of the maze.

Specifically, you will make a) the code to “render” (draw) the maze, its items, and the pirate, and b) the logic required to allow the (human) player to use the mouse and keyboard to navigate the pirate around the maze.

To configure the maze, we will use tables in a new way: you’ll use a Google Sheet to set up where the walls should be, as well as additional Google Sheets to give the coordinates where gadgets should initially be. Your program will read in these sheets, using them to create the actual background image and initial game state. The game play itself will be implemented with a reactor (as we did in lab 2 and have been doing in lecture).

## Learning Goals
This project applies what we’ve been learning about lists, recursion, and datatypes. It exercises your ability to detect what information does and doesn’t change over time in a program. It has the side benefit of showing you how animations can be built, and of showing how tables can be useful for more than just storing data. Here are the specific skills you will practice.
- Creating and using your own datatypes.
- Using recursion to process various types of lists.
- Breaking down complex goals into discrete, solvable tasks.
- Using tables for code configuration rather than as datasets.

### What class material does this build on?
This project builds on the reactors from Lab 2 and recursion skills.

## Game Details
### Maze
The entire maze should be surrounded by one layer of walls (except at the end location), so you don’t have to deal with the pirate moving outside of the maze. This also makes it clear to the human player where they need to navigate to in order to complete the game.

The wall and floor tiles are 30x30 pixels (you will need this information to convert coordinates in the grid to coordinates for place-image in Pyret). The pirate, gadgets, and obstacles are 24x24 pixels.

### The Player and Character
The current position of the player in the maze is represented with an image of the pirate. The human player moves the pirate using the `W` (up), `A` (left), `S` (down), and `D` (right) keys. The pirate cannot walk through obstacles or walls of the maze, but can move through empty space.

### Gadgets and Obstacles
There are two kinds of items placed in the demo maze: gadgets and obstacles. Gadgets are things a player can pick up. Obstacles block the pirate's movement until they are removed using explosives.

There can be an arbitrary number of these items placed on the maze. Items are picked up when the player moves into their cells (meaning they disappear subsequently); stamina-increasing gadgets are immediately consumed, and explosives are “held on to” until use. Multiple explosives can be collected; only one is used each time the player removes an obstacle.

You will implement either stamina gadgets or explosives/obstacles into the game. **You only need to implement one of these to get full credit.** You may do both if you want, but you will not get extra credit. Either option is challenging in its own way; we do not think either is significantly easier than the other.

### Starting, Winning, and Losing
The pirate will start at a location of your choosing. The information of where they start should be hardcoded through named constants in your code.

The player wins the game upon reaching the exit location that you set. This information should also be hardcoded through constants.

The player loses the game if the pirate runs out of stamina. If you don’t implement stamina gadgets, the player doesn’t have to worry about losing.

Upon winning or losing, the game can simply stop. You may also choose to somehow inform the player that they have won or lost, but this is not required.

# Phase 1: Basic Reactor
**Task 0:** Make a copy of the project starter file.

**Task 1:** Decide whether you want to implement gadgets (stamina) or obstacles.

**Task 2:** Watch the example video and figure out what information changes over time as the game is played. Just write this down in prose (no code).

**Task 3:** Organize this information into a Pyret `data` block that captures the state of the game (call it `GameState`). You will end up using a combination of lists and other `data` blocks in your design. Include whichever of gadgets or explosives you’ve chosen (you can skip the other).

*Hint: Figuring out the datatype for this is one of the more challenging parts of this assignment. Look at the things you identified for Task 2: you’ll end up making datatypes for objects in the animation (with their attributes), collections of similar objects, and datatypes that gather objects and collections into single “concepts” within the game. Expect to need some time here. If you aren’t sure what makes the most sense, come up with a couple of different ideas and review them with a TA.*

**Note:** your data block should contain ONLY information that changes about your animation over time. An element that doesn’t change will go into the background in Task 5.

**Task 4:** In code, write a concrete example of `GameState` data for an initial configuration of your game. Don’t worry about information that will eventually come from one of the Google Sheets – just make SOME example for now.

**Task 5:** Build the 'BACKGROUND' image for a maze (the part of the image that does NOT change over time). Don’t worry about including the gadgets or wormholes.

A maze design will be given as a list of lists of "x" and "o", such as the following (“x” is a wall/blocked, “o” is open space):
```
small-maze = 
  [list: [list: "x", "x", "o", "x"],
         [list: "x", "o", "o", "x"],
         [list: "x", "o", "x", "x"],
         [list: "x", "o", "x", "x"],
         ] 
```
While later in the project you will read in such a list of lists from a Google Sheet, for a first pass just build a maze background image from a small example like `small-maze`.

How can you do this? Notice that the list of lists is a form of grid; the maze image will also be a grid, just made from images (with a “wall” icon in place of “x” and a “floor” icon in place of “o”).

**Task 6:** Set up a simple reactor that moves the pirate across the background image when the human player presses a key, without worrying about the maze grid cells or walls (just get a basic reactor running). Reference Task 3 to set up your initial GameState configuration.

**Task 7:** Make sure you can load the configuration data from Google Sheets.

**Task 8:** Plan how to implement gadgets or portals.

If you are implementing gadgets: Consider what should happen to the `GameState` when the pirate lands on a square with a specific gadget (pick whichever one you want to handle).
If you are implementing obstacles: The reactor `mouse-clicked` function takes in the current `GameState value`, the `x` and `y` value of the position of the mouse event (in the reactor), and a `String` that represents the name of the mouse event. Consider tasks needed to compute the new `GameState` based on the current `GameState` if the mouse has been clicked.

# Phase 2: Implementation Details
